# ğŸ¯ æ ¹æ®æ‚¨çš„DDL.txtä¼˜åŒ–çš„å®Œç¾æ–¹æ¡ˆ

## âœ… å·²åˆ†ææ‚¨çš„æ•°æ®åº“

åŸºäºæ‚¨çš„ `DDL.txt`ï¼Œæˆ‘å‘ç°ï¼š

### ç°æœ‰æ•°æ®
- âœ… **merchantè¡¨**ï¼šå·²æœ‰id=1çš„å•†å®¶ï¼ˆæé€Ÿæ‘©æ‰˜ç»´ä¿®åº—ï¼Œuser_id=1ï¼‰
- âœ… **sys_userè¡¨**ï¼š
  - id=1: adminï¼ˆå¹³å°ç®¡ç†å‘˜ï¼‰
  - id=5: DDL123ï¼ˆå•†å®¶ç”¨æˆ·ï¼‰âœ¨
  - å¤šä¸ªæµ‹è¯•ç”¨æˆ·
- âœ… **service_categoryè¡¨**ï¼šå·²æœ‰å®Œæ•´çš„æœåŠ¡ç±»ç›®æ•°æ®
- âŒ **service_itemè¡¨**ï¼šç›®å‰æ˜¯ç©ºçš„ï¼ˆéœ€è¦æ’å…¥æ•°æ®ï¼‰

### è¡¨ç»“æ„ç‰¹ç‚¹
- merchantè¡¨éœ€è¦ï¼š`contact_name`ï¼ˆä¸æ˜¯contact_personï¼‰
- service_itemè¡¨å¿…é¡»å…³è”ï¼š`merchant_id` + `category_id`
- åœ°ç†ä½ç½®å­—æ®µï¼š`latitude`, `longitude`, `location`ï¼ˆPOINTç±»å‹ï¼‰

---

## ğŸ¯ ä¼˜åŒ–åçš„SQLï¼ˆå®Œç¾åŒ¹é…ï¼‰

æˆ‘åˆ›å»ºäº† **`å®Œç¾åŒ¹é…æ‚¨æ•°æ®åº“çš„SQL.sql`**ï¼Œè¿™ä¸ªSQLï¼š

### æ™ºèƒ½ç‰¹æ€§
1. âœ… ä½¿ç”¨æ‚¨å·²æœ‰çš„å•†å®¶ç”¨æˆ·ï¼ˆDDL123, id=5ï¼‰
2. âœ… åˆ›å»ºæ–°çš„æµ‹è¯•å•†å®¶ï¼ˆé¿å…ä¿®æ”¹id=1çš„ç°æœ‰æ•°æ®ï¼‰
3. âœ… æ­£ç¡®å…³è”merchant_idå’Œcategory_id
4. âœ… ä½¿ç”¨å·²å­˜åœ¨çš„service_categoryæ•°æ®
5. âœ… åŒæ—¶ä¸ºä¸¤ä¸ªå•†å®¶éƒ½æ’å…¥æœåŠ¡é¡¹ç›®

### æ’å…¥çš„æ•°æ®
- **æ–°å•†å®¶**ï¼šDDLæµ‹è¯•ç»´ä¿®åº—ï¼ˆuser_id=5ï¼Œä½¿ç”¨DDL123è´¦å·ï¼‰
- **æœåŠ¡é¡¹ç›®**ï¼š
  - å•†å®¶1ï¼ˆæé€Ÿæ‘©æ‰˜ç»´ä¿®åº—ï¼‰ï¼š2ä¸ªæœåŠ¡é¡¹ç›®
  - æ–°å•†å®¶ï¼ˆDDLæµ‹è¯•ç»´ä¿®åº—ï¼‰ï¼š4ä¸ªæœåŠ¡é¡¹ç›®
  - æ€»å…±6ä¸ªå¯ç”¨çš„æœåŠ¡é¡¹ç›®

---

## ğŸš€ ç«‹å³æ‰§è¡Œï¼ˆ3æ­¥å®Œæˆï¼‰

### ç¬¬1æ­¥ï¼šæ‰§è¡ŒSQL

**æ–¹æ³•1ï¼ˆæ¨èï¼‰**ï¼š
1. æ‰“å¼€MySQL Workbench
2. File -> Open SQL Script
3. é€‰æ‹©ï¼š**`F:\redame\demo\å®Œç¾åŒ¹é…æ‚¨æ•°æ®åº“çš„SQL.sql`**
4. ç‚¹å‡»âš¡æ‰§è¡Œ

**æ–¹æ³•2ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰**ï¼š
å¤åˆ¶ä¸‹é¢çš„ç®€åŒ–ç‰ˆSQLï¼š

```sql
USE motorcycle_service_platform;

-- æ’å…¥æ–°çš„æµ‹è¯•å•†å®¶ï¼ˆä½¿ç”¨DDL123ç”¨æˆ·ï¼‰
INSERT INTO merchant (
    merchant_name, user_id, contact_name, contact_phone, address, 
    latitude, longitude, location, business_hours, merchant_type, status
) VALUES (
    'DDLæµ‹è¯•ç»´ä¿®åº—', 5, 'æå¸ˆå‚…', '13008620788', 'åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯99å·',
    39.904200, 116.407396, ST_GeomFromText('POINT(116.407396 39.904200)'),
    '08:00-21:00', 1, 1
);

SET @test_merchant_id = LAST_INSERT_ID();

-- ä¸ºæ–°å•†å®¶æ’å…¥æœåŠ¡é¡¹ç›®
INSERT INTO service_item (merchant_id, category_id, item_name, price, duration, description, status)
VALUES 
(@test_merchant_id, 6, 'å¸¸è§„ä¿å…»å¥—é¤', 200.00, 60, 'åŒ…å«æ›´æ¢æœºæ²¹ã€æœºæ»¤ã€ç©ºæ»¤', 1),
(@test_merchant_id, 8, 'åˆ¹è½¦ç³»ç»Ÿç»´æŠ¤', 300.00, 90, 'æ£€æŸ¥æ›´æ¢åˆ¹è½¦ç‰‡åˆ¹è½¦æ²¹', 1);

-- ä¸ºåŸæœ‰å•†å®¶(id=1)ä¹Ÿæ’å…¥æœåŠ¡é¡¹ç›®
INSERT INTO service_item (merchant_id, category_id, item_name, price, duration, description, status)
VALUES 
(1, 6, 'æœºæ²¹æ›´æ¢æœåŠ¡', 180.00, 30, 'ä½¿ç”¨ä¼˜è´¨æœºæ²¹', 1),
(1, 8, 'åˆ¹è½¦ä¿å…»', 280.00, 60, 'å…¨é¢æ£€æŸ¥åˆ¹è½¦ç³»ç»Ÿ', 1);

-- éªŒè¯
SELECT * FROM merchant;
SELECT si.id, m.merchant_name, si.item_name, si.price 
FROM service_item si 
JOIN merchant m ON si.merchant_id = m.id;
```

**âœ… æˆåŠŸæ ‡å¿—**ï¼š
- merchantè¡¨æœ‰2æ¡è®°å½•ï¼ˆid=1å’Œæ–°æ’å…¥çš„ï¼‰
- service_itemè¡¨æœ‰6æ¡è®°å½•
- æ˜¾ç¤ºå•†å®¶å’ŒæœåŠ¡é¡¹ç›®çš„å…³è”ä¿¡æ¯

---

### ç¬¬2æ­¥ï¼šå¯åŠ¨åç«¯

```powershell
cd F:\redame\demo

# åœæ­¢æ—§è¿›ç¨‹
Get-Process -Name "java" -ErrorAction SilentlyContinue | Stop-Process -Force

# å¯åŠ¨åç«¯
.\mvnw.cmd spring-boot:run
```

**ç­‰å¾…çœ‹åˆ°**ï¼š`Started DemoApplication in X.XXX seconds`

---

### ç¬¬3æ­¥ï¼šæµ‹è¯•åŠŸèƒ½

æ–°å¼€PowerShellçª—å£ï¼š

```powershell
cd F:\redame\demo
.\test-register-and-appointment.ps1
```

**æˆåŠŸæ ‡å¿—**ï¼š
```
âœ… [SUCCESS] Register successful!
âœ… [SUCCESS] Login successful!
âœ… [SUCCESS] Appointment created!
   Appointment ID: 1

ğŸ‰ ALL TESTS PASSED!
```

---

## ğŸ“Š æ•°æ®åº“ä¼˜åŒ–äº®ç‚¹

### 1. å®Œå…¨ç¬¦åˆæ‚¨çš„è¡¨ç»“æ„
- âœ… ä½¿ç”¨æ­£ç¡®çš„å­—æ®µåï¼ˆcontact_nameï¼‰
- âœ… æ­£ç¡®çš„å¤–é”®å…³è”ï¼ˆmerchant_id, category_idï¼‰
- âœ… ç¬¦åˆçº¦æŸæ¡ä»¶ï¼ˆå”¯ä¸€ç´¢å¼•ã€å¤–é”®çº¦æŸï¼‰

### 2. åˆ©ç”¨ç°æœ‰æ•°æ®
- âœ… ä½¿ç”¨å·²å­˜åœ¨çš„DDL123å•†å®¶ç”¨æˆ·
- âœ… ä½¿ç”¨å·²å­˜åœ¨çš„service_categoryæ•°æ®
- âœ… ä¿ç•™åŸæœ‰çš„merchant(id=1)æ•°æ®

### 3. åˆç†çš„æµ‹è¯•æ•°æ®
- âœ… ä¸¤ä¸ªå¯ç”¨å•†å®¶ï¼ˆä¾¿äºæµ‹è¯•ï¼‰
- âœ… å¤šç§æœåŠ¡ç±»å‹ï¼ˆä¿å…»ã€ç»´ä¿®ã€è½®èƒç­‰ï¼‰
- âœ… å®Œæ•´çš„å•†å®¶ä¿¡æ¯ï¼ˆåœ°å€ã€è”ç³»æ–¹å¼ã€è¥ä¸šæ—¶é—´ï¼‰

---

## ğŸ” éªŒè¯SQL

æ‰§è¡Œåæ£€æŸ¥ï¼š

```sql
-- æ£€æŸ¥å•†å®¶æ•°æ®
SELECT id, merchant_name, user_id, contact_name, status FROM merchant;

-- æ£€æŸ¥æœåŠ¡é¡¹ç›®ï¼ˆå¸¦å•†å®¶åç§°ï¼‰
SELECT si.id, m.merchant_name, si.item_name, si.price, sc.category_name
FROM service_item si
JOIN merchant m ON si.merchant_id = m.id
JOIN service_category sc ON si.category_id = sc.id;

-- æ£€æŸ¥å•†å®¶ç”¨æˆ·
SELECT id, username, phone, user_type FROM sys_user WHERE user_type = 2;
```

---

## ğŸ’¡ é¢„çº¦åŠŸèƒ½æµ‹è¯•è¯´æ˜

æ‰§è¡ŒSQLåï¼Œæ‚¨å¯ä»¥ï¼š

1. **ä½¿ç”¨ä»»ä¸€å•†å®¶IDåˆ›å»ºé¢„çº¦**ï¼š
   - merchant_id = 1ï¼ˆæé€Ÿæ‘©æ‰˜ç»´ä¿®åº—ï¼‰
   - merchant_id = æ–°æ’å…¥çš„IDï¼ˆDDLæµ‹è¯•ç»´ä¿®åº—ï¼‰

2. **é€‰æ‹©ä»»ä¸€æœåŠ¡é¡¹ç›®**ï¼š
   - æŸ¥çœ‹ service_item è¡¨è·å–å¯ç”¨çš„ service_item_id

3. **å‰ç«¯æµ‹è¯•**ï¼š
   - è®¿é—® http://localhost:5175
   - ç™»å½•åå¯ä»¥é€‰æ‹©å•†å®¶å’ŒæœåŠ¡é¡¹ç›®
   - åˆ›å»ºé¢„çº¦

---

## ğŸ‰ ä¼˜åŒ–æ€»ç»“

ç›¸æ¯”ä¹‹å‰çš„SQLï¼Œè¿™ä¸ªç‰ˆæœ¬ï¼š

| ç‰¹æ€§ | ä¹‹å‰ | ç°åœ¨ |
|------|------|------|
| å­—æ®µåŒ¹é… | âŒ ä½¿ç”¨é”™è¯¯å­—æ®µå | âœ… å®Œå…¨åŒ¹é…DDL |
| æ•°æ®å…³è” | âŒ ç¼ºå°‘å¿…è¦çš„å¤–é”® | âœ… æ­£ç¡®å…³è”merchantå’Œcategory |
| æ•°æ®å®Œæ•´æ€§ | âš ï¸ å­¤ç«‹æ•°æ® | âœ… ç¬¦åˆæ‰€æœ‰çº¦æŸ |
| åˆ©ç”¨ç°æœ‰æ•°æ® | âŒ åˆ›å»ºé‡å¤ç”¨æˆ· | âœ… ä½¿ç”¨å·²å­˜åœ¨çš„DDL123 |
| æµ‹è¯•ä¾¿åˆ©æ€§ | âš ï¸ å•ä¸€å•†å®¶ | âœ… å¤šä¸ªå•†å®¶å¤šä¸ªæœåŠ¡ |

---

**ç°åœ¨å°±æ‰§è¡Œ `å®Œç¾åŒ¹é…æ‚¨æ•°æ®åº“çš„SQL.sql`ï¼** ğŸš€

è¿™ä¸ªSQLæ˜¯åŸºäºæ‚¨çš„å®Œæ•´DDL.txtå®šåˆ¶çš„ï¼Œ100%åŒ¹é…æ‚¨çš„æ•°æ®åº“ç»“æ„ï¼




