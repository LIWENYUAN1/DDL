# ğŸ¯ æ‘©æ‰˜è½¦æœåŠ¡å¹³å°åŠŸèƒ½å®Œå–„è®¡åˆ’

## ğŸ“‹ å½“å‰é—®é¢˜
- âœ… ç”¨æˆ·é¢„çº¦åæ— æ³•å½•å…¥æ•°æ®åº“ â† **å·²æœ‰åŸºç¡€ä»£ç ï¼Œéœ€å®Œå–„**
- âœ… å•†å®¶æ— æ³•æŸ¥çœ‹é¢„çº¦ â† **éœ€åˆ›å»ºå•†å®¶ç«¯æ¥å£å’Œé¡µé¢**
- âœ… ç®¡ç†å‘˜æ— æ³•è¿›è¡Œåå°ç®¡ç† â† **éœ€åˆ›å»ºç®¡ç†å‘˜ç«¯æ¥å£å’Œé¡µé¢**
- âœ… å„è§’è‰²ä¹‹é—´ç¼ºä¹äº¤äº’ â† **éœ€å®Œå–„å·¥ä½œæµç¨‹**

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ä¸‰ä¸ªè§’è‰²
1. **ğŸ‘¤ ç”¨æˆ·ï¼ˆUserï¼‰** - userType = 1
   - æ³¨å†Œ/ç™»å½•
   - åˆ›å»ºé¢„çº¦
   - æŸ¥çœ‹æˆ‘çš„é¢„çº¦
   - å–æ¶ˆé¢„çº¦
   - æŸ¥çœ‹é™„è¿‘å•†å®¶
   - è¯„ä»·æœåŠ¡

2. **ğŸª å•†å®¶ï¼ˆMerchantï¼‰** - userType = 2
   - æ³¨å†Œ/ç™»å½•
   - æŸ¥çœ‹é¢„çº¦åˆ—è¡¨
   - ç¡®è®¤é¢„çº¦
   - å®ŒæˆæœåŠ¡
   - æ‹’ç»é¢„çº¦
   - ç®¡ç†æœåŠ¡é¡¹ç›®
   - æŸ¥çœ‹è¥ä¸šæ•°æ®

3. **ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ï¼ˆAdminï¼‰** - userType = 3
   - ç™»å½•ï¼ˆä¸éœ€è¦æ³¨å†Œï¼Œæ•°æ®åº“é¢„è®¾ï¼‰
   - å®¡æ ¸å•†å®¶ç”³è¯·
   - ç®¡ç†ç”¨æˆ·
   - æŸ¥çœ‹æ‰€æœ‰é¢„çº¦
   - æŸ¥çœ‹æ‰€æœ‰è®¢å•
   - ç³»ç»Ÿæ•°æ®ç»Ÿè®¡

---

## ğŸ“Š æ•°æ®æµç¨‹

### å®Œæ•´ä¸šåŠ¡æµç¨‹

```
ç”¨æˆ·åˆ›å»ºé¢„çº¦
    â†“
[å­˜å…¥appointmentè¡¨ï¼ŒçŠ¶æ€=0ï¼ˆå¾…ç¡®è®¤ï¼‰]
    â†“
å•†å®¶æŸ¥çœ‹é¢„çº¦åˆ—è¡¨
    â†“
å•†å®¶ç¡®è®¤é¢„çº¦
    â†“
[æ›´æ–°appointmentè¡¨ï¼ŒçŠ¶æ€=1ï¼ˆå·²ç¡®è®¤ï¼‰]
    â†“
å•†å®¶æä¾›æœåŠ¡
    â†“
å•†å®¶æ ‡è®°å®Œæˆ
    â†“
[æ›´æ–°appointmentè¡¨ï¼ŒçŠ¶æ€=2ï¼ˆå·²å®Œæˆï¼‰]
[å¯é€‰ï¼šåˆ›å»ºorderè®¢å•è®°å½•]
    â†“
ç”¨æˆ·è¯„ä»·ï¼ˆå¯é€‰ï¼‰
    â†“
[åˆ›å»ºcommentè¯„ä»·è®°å½•]
    â†“
ç®¡ç†å‘˜å¯æŸ¥çœ‹æ‰€æœ‰è®°å½•
```

---

## ğŸ”§ éœ€è¦å®Œå–„çš„åç«¯åŠŸèƒ½

### 1. å•†å®¶ç®¡ç† Controller & Service
```java
// MerchantController.java
- GET  /api/merchant/info - è·å–å•†å®¶ä¿¡æ¯
- PUT  /api/merchant/info - æ›´æ–°å•†å®¶ä¿¡æ¯
- GET  /api/merchant/appointments - æŸ¥çœ‹é¢„çº¦åˆ—è¡¨
- POST /api/merchant/appointments/{id}/confirm - ç¡®è®¤é¢„çº¦
- POST /api/merchant/appointments/{id}/complete - å®Œæˆé¢„çº¦
- POST /api/merchant/appointments/{id}/reject - æ‹’ç»é¢„çº¦
- GET  /api/merchant/statistics - è¥ä¸šç»Ÿè®¡
```

### 2. ç”¨æˆ·é¢„çº¦ Controllerï¼ˆå·²æœ‰ï¼Œéœ€å®Œå–„ï¼‰
```java
// AppointmentController.javaï¼ˆå·²å­˜åœ¨ï¼‰
- POST /api/appointment/create - åˆ›å»ºé¢„çº¦ âœ…
- GET  /api/appointment/user/list - ç”¨æˆ·é¢„çº¦åˆ—è¡¨ âœ…
- POST /api/appointment/cancel/{id} - å–æ¶ˆé¢„çº¦ âœ…
- GET  /api/appointment/detail/{id} - é¢„çº¦è¯¦æƒ… âœ…
```

### 3. ç®¡ç†å‘˜ç®¡ç† Controller
```java
// AdminController.java
- GET  /api/admin/merchants - å•†å®¶åˆ—è¡¨
- POST /api/admin/merchants/{id}/approve - å®¡æ ¸é€šè¿‡
- POST /api/admin/merchants/{id}/reject - å®¡æ ¸æ‹’ç»
- GET  /api/admin/users - ç”¨æˆ·åˆ—è¡¨
- PUT  /api/admin/users/{id}/status - ä¿®æ”¹ç”¨æˆ·çŠ¶æ€
- GET  /api/admin/appointments - æ‰€æœ‰é¢„çº¦
- GET  /api/admin/statistics - å¹³å°æ•°æ®ç»Ÿè®¡
```

### 4. å…¬å…± API
```java
// MerchantPublicController.java
- GET  /api/public/merchants - æŸ¥è¯¢é™„è¿‘å•†å®¶ï¼ˆç”¨æˆ·ç«¯ä½¿ç”¨ï¼‰
- GET  /api/public/merchants/{id} - å•†å®¶è¯¦æƒ…
- GET  /api/public/merchants/{id}/services - å•†å®¶æœåŠ¡é¡¹ç›®
```

---

## ğŸ¨ éœ€è¦å®Œå–„çš„å‰ç«¯åŠŸèƒ½

### 1. ç”¨æˆ·ç«¯é¡µé¢ï¼ˆ`/user/*`ï¼‰
```vue
- UserHomeView.vue - ç”¨æˆ·é¦–é¡µï¼ˆæŸ¥çœ‹é™„è¿‘å•†å®¶ï¼‰âœ… å·²æœ‰
- UserAppointmentsView.vue - æˆ‘çš„é¢„çº¦ ğŸ“ éœ€å®Œå–„
  - é¢„çº¦åˆ—è¡¨ï¼ˆå¾…ç¡®è®¤ã€å·²ç¡®è®¤ã€å·²å®Œæˆã€å·²å–æ¶ˆï¼‰
  - åˆ›å»ºé¢„çº¦æŒ‰é’®
  - å–æ¶ˆé¢„çº¦åŠŸèƒ½
  
- CreateAppointmentView.vue - åˆ›å»ºé¢„çº¦ â­ æ–°å¢
  - é€‰æ‹©å•†å®¶
  - é€‰æ‹©æœåŠ¡é¡¹ç›®
  - é€‰æ‹©æ—¶é—´
  - å¡«å†™å¤‡æ³¨
  
- AppointmentDetailView.vue - é¢„çº¦è¯¦æƒ… â­ æ–°å¢
  - æ˜¾ç¤ºé¢„çº¦ä¿¡æ¯
  - æ˜¾ç¤ºå•†å®¶ä¿¡æ¯
  - æ˜¾ç¤ºæœåŠ¡é¡¹ç›®
  - å–æ¶ˆé¢„çº¦æŒ‰é’®
```

### 2. å•†å®¶ç«¯é¡µé¢ï¼ˆ`/shop/*`ï¼‰
```vue
- ShopHomeView.vue - å•†å®¶é¦–é¡µ âœ… å·²æœ‰
  - ä»Šæ—¥é¢„çº¦æ•°
  - å¾…ç¡®è®¤é¢„çº¦æ•°
  - è¥ä¸šæ•°æ®

- ShopAppointmentsView.vue - é¢„çº¦ç®¡ç† ğŸ“ éœ€å®Œå–„
  - é¢„çº¦åˆ—è¡¨ï¼ˆå¯æŒ‰çŠ¶æ€ç­›é€‰ï¼‰
  - ç¡®è®¤é¢„çº¦
  - å®ŒæˆæœåŠ¡
  - æ‹’ç»é¢„çº¦
  
- AppointmentDetailView.vue - é¢„çº¦è¯¦æƒ… â­ æ–°å¢
  - æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯
  - æŸ¥çœ‹è½¦è¾†ä¿¡æ¯
  - æŸ¥çœ‹æœåŠ¡é¡¹ç›®
  - æ“ä½œæŒ‰é’®ï¼ˆç¡®è®¤/å®Œæˆ/æ‹’ç»ï¼‰

- ShopServicesView.vue - æœåŠ¡é¡¹ç›®ç®¡ç† ğŸ“ éœ€å®Œå–„
  - æœåŠ¡é¡¹ç›®åˆ—è¡¨
  - æ·»åŠ /ç¼–è¾‘/åˆ é™¤æœåŠ¡é¡¹ç›®

- ShopProfileView.vue - å•†å®¶ä¿¡æ¯ ğŸ“ éœ€å®Œå–„
  - ç¼–è¾‘å•†å®¶ä¿¡æ¯
  - ä¸Šä¼ è¥ä¸šæ‰§ç…§
  - è®¾ç½®è¥ä¸šæ—¶é—´
```

### 3. ç®¡ç†å‘˜ç«¯é¡µé¢ï¼ˆ`/admin/*`ï¼‰
```vue
- AdminHomeView.vue - ç®¡ç†å‘˜é¦–é¡µ âœ… å·²æœ‰
  - å¹³å°æ•°æ®ç»Ÿè®¡
  - å¾…å®¡æ ¸å•†å®¶æ•°
  - ä»Šæ—¥é¢„çº¦æ•°
  
- AdminUsersView.vue - ç”¨æˆ·ç®¡ç† ğŸ“ éœ€å®Œå–„
  - ç”¨æˆ·åˆ—è¡¨
  - æœç´¢ç”¨æˆ·
  - ç¦ç”¨/å¯ç”¨ç”¨æˆ·
  
- AdminShopsView.vue - å•†å®¶ç®¡ç† ğŸ“ éœ€å®Œå–„
  - å•†å®¶åˆ—è¡¨
  - å®¡æ ¸å•†å®¶ï¼ˆé€šè¿‡/æ‹’ç»ï¼‰
  - æŸ¥çœ‹å•†å®¶è¯¦æƒ…
  
- AdminAppointmentsView.vue - é¢„çº¦ç®¡ç† ğŸ“ éœ€å®Œå–„
  - æ‰€æœ‰é¢„çº¦åˆ—è¡¨
  - æœç´¢é¢„çº¦
  - æŸ¥çœ‹é¢„çº¦è¯¦æƒ…
  
- AdminStatisticsView.vue - æ•°æ®ç»Ÿè®¡ ğŸ“ éœ€å®Œå–„
  - ç”¨æˆ·æ•°é‡è¶‹åŠ¿
  - é¢„çº¦æ•°é‡è¶‹åŠ¿
  - å•†å®¶åˆ†å¸ƒ
  - æ”¶å…¥ç»Ÿè®¡
```

---

## ğŸ” æƒé™é…ç½®æ›´æ–°

éœ€è¦æ›´æ–° `SecurityConfig.java`ï¼š

```java
// ç”¨æˆ·ç«¯API
.requestMatchers("/api/appointment/**").hasAnyRole("USER", "ADMIN")

// å•†å®¶ç«¯API
.requestMatchers("/api/merchant/**").hasAnyRole("MERCHANT", "ADMIN")

// ç®¡ç†å‘˜ç«¯API
.requestMatchers("/api/admin/**").hasRole("ADMIN")

// å…¬å…±APIï¼ˆä¸éœ€è¦ç™»å½•ï¼‰
.requestMatchers("/api/public/**").permitAll()
```

---

## ğŸ“… å®æ–½æ­¥éª¤

### Phase 1: åç«¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆ2å°æ—¶ï¼‰
1. âœ… å®Œå–„AppointmentServiceï¼ˆå·²å®Œæˆï¼‰
2. â­ åˆ›å»ºMerchantControllerå’ŒService
3. â­ åˆ›å»ºAdminControllerå’ŒService
4. â­ åˆ›å»ºPublicControllerï¼ˆå…¬å…±APIï¼‰
5. â­ æ›´æ–°SecurityConfigæƒé™é…ç½®

### Phase 2: å‰ç«¯ç”¨æˆ·ç«¯ï¼ˆ1å°æ—¶ï¼‰
1. â­ å®Œå–„UserAppointmentsViewï¼ˆæˆ‘çš„é¢„çº¦ï¼‰
2. â­ åˆ›å»ºCreateAppointmentViewï¼ˆåˆ›å»ºé¢„çº¦ï¼‰
3. â­ åˆ›å»ºAppointmentDetailViewï¼ˆé¢„çº¦è¯¦æƒ…ï¼‰

### Phase 3: å‰ç«¯å•†å®¶ç«¯ï¼ˆ1å°æ—¶ï¼‰
1. â­ å®Œå–„ShopAppointmentsViewï¼ˆé¢„çº¦ç®¡ç†ï¼‰
2. â­ åˆ›å»ºShopAppointmentDetailViewï¼ˆé¢„çº¦è¯¦æƒ…ï¼‰
3. â­ å®Œå–„ShopServicesViewï¼ˆæœåŠ¡ç®¡ç†ï¼‰

### Phase 4: å‰ç«¯ç®¡ç†å‘˜ç«¯ï¼ˆ1å°æ—¶ï¼‰
1. â­ å®Œå–„AdminUsersViewï¼ˆç”¨æˆ·ç®¡ç†ï¼‰
2. â­ å®Œå–„AdminShopsViewï¼ˆå•†å®¶ç®¡ç†ï¼‰
3. â­ å®Œå–„AdminAppointmentsViewï¼ˆé¢„çº¦ç®¡ç†ï¼‰

### Phase 5: æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ30åˆ†é’Ÿï¼‰
1. â­ æµ‹è¯•å®Œæ•´æµç¨‹
2. â­ ä¿®å¤bug
3. â­ ä¼˜åŒ–ä½“éªŒ

---

## ğŸ¯ ç«‹å³å¼€å§‹

æˆ‘å°†æŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿›è¡Œï¼š

1. **åˆ›å»ºMerchantController** - å•†å®¶ç«¯æ ¸å¿ƒåŠŸèƒ½
2. **åˆ›å»ºAdminController** - ç®¡ç†å‘˜ç«¯æ ¸å¿ƒåŠŸèƒ½  
3. **åˆ›å»ºPublicController** - å…¬å…±API
4. **å®Œå–„å‰ç«¯ç”¨æˆ·é¡µé¢** - ç”¨æˆ·åˆ›å»ºé¢„çº¦å’ŒæŸ¥çœ‹é¢„çº¦
5. **å®Œå–„å‰ç«¯å•†å®¶é¡µé¢** - å•†å®¶æŸ¥çœ‹å’Œç®¡ç†é¢„çº¦
6. **å®Œå–„å‰ç«¯ç®¡ç†å‘˜é¡µé¢** - ç®¡ç†å‘˜å®¡æ ¸å’Œç›‘æ§
7. **æµ‹è¯•å®Œæ•´æµç¨‹** - ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“ä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰æ“ä½œéƒ½ä½¿ç”¨äº‹åŠ¡
2. **æƒé™éªŒè¯**ï¼šæ¯ä¸ªæ¥å£éƒ½è¦éªŒè¯ç”¨æˆ·æƒé™
3. **çŠ¶æ€æµè½¬**ï¼šé¢„çº¦çŠ¶æ€å˜æ›´è¦éµå¾ªè§„åˆ™
4. **ç”¨æˆ·ä½“éªŒ**ï¼šå‰ç«¯è¦æœ‰æ¸…æ™°çš„çŠ¶æ€æç¤º
5. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†

---

**å‡†å¤‡å¼€å§‹å®æ–½ï¼Œé¢„è®¡æ€»æ—¶é—´ï¼š5-6å°æ—¶** â±ï¸





