# ğŸ¯ å¿«é€Ÿå¯åŠ¨è¯„ä»·åŠŸèƒ½

## âš¡ ä¸¤æ­¥å®Œæˆ

### **ç¬¬1æ­¥ï¼šåˆ›å»ºæ•°æ®åº“è¡¨ï¼ˆ1åˆ†é’Ÿï¼‰**

æ‰“å¼€ Navicatï¼Œæ‰§è¡ŒSQLï¼š

```sql
DROP TABLE IF EXISTS `appointment_review`;
CREATE TABLE `appointment_review`  (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'è¯„ä»·ID',
  `appointment_id` bigint NOT NULL COMMENT 'é¢„çº¦ID',
  `user_id` bigint NOT NULL COMMENT 'ç”¨æˆ·ID',
  `merchant_id` bigint NOT NULL COMMENT 'å•†å®¶ID',
  `score` tinyint NOT NULL COMMENT 'è¯„åˆ†(1-5åˆ†)',
  `service_score` tinyint NULL COMMENT 'æœåŠ¡è¯„åˆ†',
  `quality_score` tinyint NULL COMMENT 'è´¨é‡è¯„åˆ†',
  `attitude_score` tinyint NULL COMMENT 'æ€åº¦è¯„åˆ†',
  `content` text NULL COMMENT 'è¯„ä»·å†…å®¹',
  `img_urls` varchar(1000) NULL COMMENT 'è¯„ä»·å›¾ç‰‡',
  `reply_content` text NULL COMMENT 'å•†å®¶å›å¤',
  `reply_time` datetime NULL COMMENT 'å›å¤æ—¶é—´',
  `status` tinyint NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€:0-éšè—,1-æ˜¾ç¤º',
  `is_anonymous` tinyint NOT NULL DEFAULT 0 COMMENT 'æ˜¯å¦åŒ¿å',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `uk_appointment_id`(`appointment_id`),
  INDEX `idx_user_id`(`user_id`),
  INDEX `idx_merchant_id`(`merchant_id`),
  CONSTRAINT `fk_review_appointment` FOREIGN KEY (`appointment_id`) REFERENCES `appointment` (`id`) ON DELETE CASCADE,
  CONSTRAINT `fk_review_user` FOREIGN KEY (`user_id`) REFERENCES `sys_user` (`id`),
  CONSTRAINT `fk_review_merchant` FOREIGN KEY (`merchant_id`) REFERENCES `merchant` (`id`)
) ENGINE = InnoDB CHARSET = utf8mb4 COMMENT = 'é¢„çº¦è¯„ä»·è¡¨';
```

**éªŒè¯**ï¼š
```sql
DESC appointment_review;
```

---

### **ç¬¬2æ­¥ï¼šé‡å¯åç«¯ï¼ˆ1åˆ†é’Ÿï¼‰**

#### **IDEAä¸­é‡å¯**ï¼š
1. åœæ­¢ DemoApplicationï¼ˆçº¢è‰²æ–¹å—æŒ‰é’®ï¼‰
2. é‡æ–°è¿è¡Œï¼ˆç»¿è‰²æ’­æ”¾æŒ‰é’®ï¼‰
3. ç­‰å¾…å¯åŠ¨å®Œæˆ

#### **éªŒè¯å¯åŠ¨æˆåŠŸ**ï¼š
æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8080`

---

## âœ… **å®Œæˆï¼**

åç«¯å·²å‡†å¤‡å°±ç»ªï¼

**ç°åœ¨ç­‰å¾…æˆ‘åˆ›å»ºå‰ç«¯ç»„ä»¶...**

---

## ğŸ“‹ **å·²åˆ›å»ºçš„åç«¯æ–‡ä»¶**

1. âœ… `AppointmentReview.java` - å®ä½“ç±»
2. âœ… `AppointmentReviewDTO.java` - æ•°æ®ä¼ è¾“å¯¹è±¡
3. âœ… `AppointmentReviewMapper.java` - Mapperæ¥å£
4. âœ… `AppointmentReviewMapper.xml` - SQLæ˜ å°„
5. âœ… `AppointmentReviewService.java` - æœåŠ¡æ¥å£
6. âœ… `AppointmentReviewServiceImpl.java` - æœåŠ¡å®ç°
7. âœ… `AppointmentReviewController.java` - æ§åˆ¶å™¨
8. âœ… `ResultCode.java` - æ·»åŠ è¯„ä»·é”™è¯¯ç 

---

## ğŸ” **æµ‹è¯•SQL**

åˆ›å»ºå®Œè¡¨åï¼Œå¯ä»¥æµ‹è¯•æ’å…¥æ•°æ®ï¼š

```sql
-- å…ˆå®Œæˆä¸€ä¸ªé¢„çº¦ï¼ˆå°†çŠ¶æ€æ”¹ä¸ºå·²å®Œæˆï¼‰
UPDATE appointment SET status = 3 WHERE id = 1;

-- æŸ¥çœ‹å¯è¯„ä»·çš„é¢„çº¦
SELECT 
    a.id,
    a.order_no,
    a.status,
    u.username,
    m.merchant_name
FROM appointment a
LEFT JOIN sys_user u ON a.user_id = u.id
LEFT JOIN merchant m ON a.merchant_id = m.id
WHERE a.status = 3;
```

---

**å®Œæˆè¿™ä¸¤æ­¥åå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šç»§ç»­åˆ›å»ºå‰ç«¯è¯„ä»·ç»„ä»¶ï¼** ğŸš€


