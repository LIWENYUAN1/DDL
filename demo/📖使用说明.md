# 📖 摩托车服务平台 - 使用说明

## 🎯 快速开始（推荐）

### 步骤 1: 启动后端

**方法 A: 使用启动脚本（推荐）**
```powershell
cd F:\redame\demo
.\🚀完整启动测试.ps1
```

**方法 B: 手动启动**
```powershell
cd F:\redame\demo
.\mvnw.cmd spring-boot:run
```

### 步骤 2: 测试注册登录

**在另一个PowerShell窗口**运行测试脚本：
```powershell
cd F:\redame\demo
.\⚡快速测试注册登录.ps1
```

### 步骤 3: 启动前端

```powershell
cd F:\redame\vue-project
npm run dev
```

然后访问: http://localhost:5173

## 🔧 后端说明

### 已修复的问题

✅ 数据库连接配置（移除不支持的utf8mb4）
✅ SysUser实体类字段匹配（realName替代nickname）
✅ MyBatis Mapper XML配置
✅ Spring Security认证配置
✅ 缺失的服务方法实现

### 当前配置

- **数据库**: motorcycle_service_platform
- **用户名**: root
- **密码**: 123456
- **端口**: 8080
- **MyBatis-Plus**: 3.5.5 (Spring Boot 3)
- **Spring Boot**: 3.2.5

### API端点

| 路径 | 方法 | 说明 | 需要认证 |
|------|------|------|---------|
| `/auth/register` | POST | 用户注册 | ❌ |
| `/auth/login` | POST | 用户登录 | ❌ |
| `/api/user/**` | * | 用户功能 | ✅ |
| `/api/shop/**` | * | 商家功能 | ✅ |
| `/api/admin/**` | * | 管理员功能 | ✅ |

### 注册请求示例

```json
{
  "username": "testuser",
  "password": "Test123456",
  "confirmPassword": "Test123456",
  "phone": "13900139000",
  "userType": 1,
  "code": "test"
}
```

### 登录请求示例

```json
{
  "username": "testuser",
  "password": "Test123456",
  "userType": 1
}
```

## 🎨 前端说明

### 技术栈

- Vue 3
- TypeScript
- Element Plus
- Pinia (状态管理)
- Vue Router
- Axios

### 页面路由

| 路径 | 说明 |
|------|------|
| `/` | 首页 |
| `/login` | 用户登录 |
| `/register` | 用户注册 |
| `/shop/login` | 商家登录 |
| `/shop/register` | 商家注册 |
| `/admin/login` | 管理员登录 |
| `/user/home` | 用户主页 |
| `/shop/home` | 商家主页 |
| `/admin/home` | 管理员主页 |

### 启动命令

```powershell
# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

## ❓ 常见问题

### Q1: 注册时返回5001错误

**可能原因**:
1. 数据库连接失败
2. Mapper XML配置问题
3. 字段映射错误

**解决方法**:
1. 查看后端日志窗口（前台模式启动）
2. 检查完整的错误堆栈
3. 确认数据库中sys_user表结构正确

### Q2: 后端启动失败

**检查清单**:
- ✅ MySQL是否正在运行
- ✅ 数据库motorcycle_service_platform是否存在
- ✅ 端口8080是否被占用
- ✅ application.properties配置是否正确

### Q3: 前端无法连接后端

**检查清单**:
- ✅ 后端是否在端口8080运行
- ✅ axios.ts中的baseURL是否正确 (http://localhost:8080)
- ✅ 浏览器控制台是否有CORS错误

## 🐛 调试技巧

### 1. 查看后端日志

后端日志包含详细的错误信息，是调试的关键。

**前台模式启动**（推荐）:
```powershell
cd F:\redame\demo
.\mvnw.cmd spring-boot:run
```
这样所有日志都会实时显示在控制台。

### 2. 测试数据库连接

```powershell
mysql -uroot -p123456 -e "USE motorcycle_service_platform; SELECT * FROM sys_user LIMIT 5;"
```

### 3. 检查端口占用

```powershell
netstat -ano | findstr ":8080"
```

### 4. 查看编译错误

```powershell
cd F:\redame\demo
.\mvnw.cmd compile
```

## 📞 获取帮助

如果遇到问题：

1. **查看后端日志** - 90%的问题都能从日志中找到答案
2. **检查数据库** - 确认表结构和数据是否正确
3. **提供错误信息** - 完整的错误堆栈和日志

---

**最后更新**: 2025-10-22
**版本**: 1.0.0








