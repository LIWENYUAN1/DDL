# 🎯 接下来的操作步骤

## ✅ 当前状态

1. ✅ 后端已修复并正在启动（端口8080）
2. 📋 需要您在Navicat中插入测试数据
3. ⏳ 等待插入数据后，就可以测试完整功能

---

## 第1步：在Navicat中插入测试数据 ⭐⭐⭐

### 操作步骤：

#### 1. 打开Navicat查询窗口
1. 打开Navicat
2. 连接到MySQL数据库
3. 找到 `motorcycle_service_platform` 数据库
4. **右键点击数据库名** → 选择 **"新建查询"**

#### 2. 复制并执行以下SQL

```sql
USE motorcycle_service_platform;

-- 🔴 第1步：清理旧数据（如果有）
DELETE FROM service_item WHERE merchant_id > 1;
DELETE FROM merchant WHERE id > 1;

-- 🟢 第2步：创建测试商家
INSERT INTO merchant (
    merchant_name, user_id, contact_name, contact_phone, address, 
    latitude, longitude, location, business_hours, merchant_type, status
) VALUES (
    'DDL测试维修店', 5, '李师傅', '13008620788', '北京市朝阳区建国路99号',
    39.904200, 116.407396, ST_GeomFromText('POINT(116.407396 39.904200)'),
    '08:00-21:00', 1, 1
);

-- 获取商家ID
SET @m = LAST_INSERT_ID();

-- 🟢 第3步：插入服务项目
INSERT INTO service_item (merchant_id, category_id, item_name, price, duration, description, status)
VALUES 
(@m, 6, '常规保养套餐', 200.00, 60, '包含更换机油、机滤、空滤', 1),
(@m, 8, '刹车系统维护', 300.00, 90, '检查更换刹车片刹车油', 1),
(1, 6, '机油更换服务', 180.00, 30, '使用优质机油', 1),
(1, 8, '刹车保养', 280.00, 60, '全面检查刹车系统', 1);

-- 🔍 第4步：验证数据
SELECT '=== 商家信息 ===' as info;
SELECT id, merchant_name, user_id, contact_name, contact_phone, status 
FROM merchant;

SELECT '=== 服务项目 ===' as info;
SELECT si.id, m.merchant_name, si.item_name, si.price, si.status
FROM service_item si 
JOIN merchant m ON si.merchant_id = m.id;
```

#### 3. 点击"运行"按钮
- 工具栏的绿色三角形 ▶️
- 或按键盘 `F5`
- 或按 `Ctrl+R`

#### 4. 检查结果
应该看到：
- ✅ `merchant` 表：2条记录
- ✅ `service_item` 表：4条记录
- ✅ 没有错误提示

---

## 第2步：等待后端启动完成

### 后端启动成功的标志：
打开浏览器访问：`http://localhost:8080/actuator/health`

如果显示：
```json
{"status":"UP"}
```
说明后端启动成功！

---

## 第3步：测试完整功能

### 方法1：使用PowerShell自动测试

打开新的PowerShell窗口：
```powershell
cd F:\redame\demo
.\test-register-and-appointment.ps1
```

这个脚本会自动测试：
- ✅ 注册新用户
- ✅ 登录
- ✅ 创建预约

### 方法2：使用浏览器手动测试

#### 启动前端
打开新的PowerShell窗口：
```powershell
cd F:\redame\vue-project
npm run dev
```

#### 访问前端
浏览器打开：`http://localhost:5175`

#### 测试流程
1. 注册账号（选择"普通用户"）
2. 登录
3. 点击"我要预约"
4. 选择商家：`DDL测试维修店`
5. 选择服务：`常规保养套餐`
6. 填写车辆信息和预约时间
7. 提交预约

---

## 📊 测试账号（如果需要）

### 已有的测试账号

| 账号类型 | 用户名 | 密码 | 说明 |
|---------|--------|------|------|
| 普通用户 | user1 | 123456 | 可以预约服务 |
| 商家账号 | DDL123 | DDL123456 | 可以查看预约 |
| 管理员 | admin | admin123 | 完整权限 |

---

## 🔍 常见问题

### Q1: Navicat执行SQL时报错

**A1: 如果提示重复数据**
先执行清理SQL：
```sql
DELETE FROM service_item WHERE merchant_id > 1;
DELETE FROM merchant WHERE id > 1;
```

**A2: 如果提示外键错误**
在SQL最前面加上：
```sql
SET FOREIGN_KEY_CHECKS=0;
```
在SQL最后面加上：
```sql
SET FOREIGN_KEY_CHECKS=1;
```

### Q2: 后端启动失败

**检查端口**
```powershell
netstat -ano | findstr :8080
```
如果端口被占用，杀掉进程：
```powershell
taskkill /PID <进程ID> /F
```

### Q3: 前端无法连接后端

**检查后端是否启动**
访问：`http://localhost:8080/actuator/health`

**检查前端配置**
确保 `vue-project/src/utils/axios.ts` 中：
```typescript
baseURL: 'http://localhost:8080'
```

---

## 📝 完整测试清单

- [ ] Navicat中插入测试数据
- [ ] 后端启动成功（访问health接口）
- [ ] 前端启动成功
- [ ] 注册新账号成功
- [ ] 登录成功
- [ ] 创建预约成功
- [ ] 商家能看到预约

---

## 🎯 现在就开始第1步！

**请打开Navicat，按照上面的步骤插入测试数据**

插入完成后告诉我，我会帮您测试后续功能！ 🚀




